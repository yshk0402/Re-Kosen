{"version":3,"file":"AssetPreview.mjs","sources":["../../../../../admin/src/components/EditAssetDialog/PreviewBox/AssetPreview.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/media-has-caption */\nimport * as React from 'react';\n\nimport MuxPlayer from '@mux/mux-player-react';\nimport { Box, Flex, Typography } from '@strapi/design-system';\nimport { useIntl } from 'react-intl';\nimport { styled, useTheme } from 'styled-components';\n\nimport { AssetType } from '../../../enums';\nimport { typeFromMime } from '../../../utils';\nimport { getFileIconComponent } from '../../../utils/icons';\n\nconst CardAsset = styled(Flex)`\n  min-height: 26.4rem;\n  border-radius: ${({ theme }) => theme.borderRadius} ${({ theme }) => theme.borderRadius} 0 0;\n  background: linear-gradient(\n    180deg,\n    ${({ theme }) => theme.colors.neutral0} 0%,\n    ${({ theme }) => theme.colors.neutral100} 121.48%\n  );\n`;\n\ninterface AssetPreviewProps {\n  mime: string;\n  name: string;\n  url: string;\n  onLoad?: () => void;\n}\n\nexport const AssetPreview = React.forwardRef<\n  HTMLImageElement | HTMLVideoElement | HTMLAudioElement,\n  AssetPreviewProps\n>(({ mime, url, name, ...props }, ref) => {\n  const theme = useTheme();\n\n  const assetType = typeFromMime(mime);\n\n  const { formatMessage } = useIntl();\n\n  if (assetType === AssetType.Image) {\n    return (\n      <img ref={ref as React.ForwardedRef<HTMLImageElement>} src={url} alt={name} {...props} />\n    );\n  }\n\n  if (assetType === AssetType.Video) {\n    return <MuxPlayer src={url} accentColor={theme.colors.primary500} />;\n  }\n\n  if (assetType === AssetType.Audio) {\n    return (\n      <Box margin=\"5\">\n        <audio controls src={url} ref={ref as React.ForwardedRef<HTMLAudioElement>} {...props}>\n          {name}\n        </audio>\n      </Box>\n    );\n  }\n\n  // getFileIconComponent will handle all other file types, eg. PDF, CSV, XLS, ZIP\n  // If the file type is not recognized, the default icon will be used\n  const IconComponent = getFileIconComponent(assetType);\n  return (\n    <CardAsset width=\"100%\" justifyContent=\"center\" {...props}>\n      <Flex gap={2} direction=\"column\" alignItems=\"center\">\n        <IconComponent aria-label={name} fill=\"neutral500\" width={24} height={24} />\n        <Typography textColor=\"neutral500\" variant=\"pi\">\n          {formatMessage({\n            id: 'noPreview',\n            defaultMessage: 'No preview available',\n          })}\n        </Typography>\n      </Flex>\n    </CardAsset>\n  );\n});\n\nAssetPreview.displayName = 'AssetPreview';\n"],"names":["CardAsset","styled","Flex","theme","borderRadius","colors","neutral0","neutral100","AssetPreview","React","forwardRef","mime","url","name","props","ref","useTheme","assetType","typeFromMime","formatMessage","useIntl","AssetType","Image","_jsx","img","src","alt","Video","MuxPlayer","accentColor","primary500","Audio","Box","margin","audio","controls","IconComponent","getFileIconComponent","width","justifyContent","_jsxs","gap","direction","alignItems","aria-label","fill","height","Typography","textColor","variant","id","defaultMessage","displayName"],"mappings":";;;;;;;;;;;;;;AAYA,MAAMA,SAAAA,GAAYC,MAAOC,CAAAA,IAAAA,CAAK;;AAEb,iBAAA,EAAE,CAAC,EAAEC,KAAK,EAAE,GAAKA,MAAMC,YAAY,CAAC,CAAC,EAAE,CAAC,EAAED,KAAK,EAAE,GAAKA,KAAAA,CAAMC,YAAY,CAAC;;;IAGtF,EAAE,CAAC,EAAED,KAAK,EAAE,GAAKA,KAAME,CAAAA,MAAM,CAACC,QAAQ,CAAC;IACvC,EAAE,CAAC,EAAEH,KAAK,EAAE,GAAKA,KAAME,CAAAA,MAAM,CAACE,UAAU,CAAC;;AAE7C,CAAC;AASYC,MAAAA,YAAAA,iBAAeC,KAAMC,CAAAA,UAAU,CAG1C,CAAC,EAAEC,IAAI,EAAEC,GAAG,EAAEC,IAAI,EAAE,GAAGC,OAAO,EAAEC,GAAAA,GAAAA;AAChC,IAAA,MAAMZ,KAAQa,GAAAA,QAAAA,EAAAA;AAEd,IAAA,MAAMC,YAAYC,YAAaP,CAAAA,IAAAA,CAAAA;IAE/B,MAAM,EAAEQ,aAAa,EAAE,GAAGC,OAAAA,EAAAA;IAE1B,IAAIH,SAAAA,KAAcI,SAAUC,CAAAA,KAAK,EAAE;AACjC,QAAA,qBACEC,GAACC,CAAAA,KAAAA,EAAAA;YAAIT,GAAKA,EAAAA,GAAAA;YAA6CU,GAAKb,EAAAA,GAAAA;YAAKc,GAAKb,EAAAA,IAAAA;AAAO,YAAA,GAAGC;;AAEpF;IAEA,IAAIG,SAAAA,KAAcI,SAAUM,CAAAA,KAAK,EAAE;AACjC,QAAA,qBAAOJ,GAACK,CAAAA,SAAAA,EAAAA;YAAUH,GAAKb,EAAAA,GAAAA;YAAKiB,WAAa1B,EAAAA,KAAAA,CAAME,MAAM,CAACyB;;AACxD;IAEA,IAAIb,SAAAA,KAAcI,SAAUU,CAAAA,KAAK,EAAE;AACjC,QAAA,qBACER,GAACS,CAAAA,GAAAA,EAAAA;YAAIC,MAAO,EAAA,GAAA;AACV,YAAA,QAAA,gBAAAV,GAACW,CAAAA,OAAAA,EAAAA;gBAAMC,QAAQ,EAAA,IAAA;gBAACV,GAAKb,EAAAA,GAAAA;gBAAKG,GAAKA,EAAAA,GAAAA;AAA8C,gBAAA,GAAGD,KAAK;AAClFD,gBAAAA,QAAAA,EAAAA;;;AAIT;;;AAIA,IAAA,MAAMuB,gBAAgBC,oBAAqBpB,CAAAA,SAAAA,CAAAA;AAC3C,IAAA,qBACEM,GAACvB,CAAAA,SAAAA,EAAAA;QAAUsC,KAAM,EAAA,MAAA;QAAOC,cAAe,EAAA,QAAA;AAAU,QAAA,GAAGzB,KAAK;AACvD,QAAA,QAAA,gBAAA0B,IAACtC,CAAAA,IAAAA,EAAAA;YAAKuC,GAAK,EAAA,CAAA;YAAGC,SAAU,EAAA,QAAA;YAASC,UAAW,EAAA,QAAA;;8BAC1CpB,GAACa,CAAAA,aAAAA,EAAAA;oBAAcQ,YAAY/B,EAAAA,IAAAA;oBAAMgC,IAAK,EAAA,YAAA;oBAAaP,KAAO,EAAA,EAAA;oBAAIQ,MAAQ,EAAA;;8BACtEvB,GAACwB,CAAAA,UAAAA,EAAAA;oBAAWC,SAAU,EAAA,YAAA;oBAAaC,OAAQ,EAAA,IAAA;8BACxC9B,aAAc,CAAA;wBACb+B,EAAI,EAAA,WAAA;wBACJC,cAAgB,EAAA;AAClB,qBAAA;;;;;AAKV,CAAG;AAEH3C,YAAAA,CAAa4C,WAAW,GAAG,cAAA;;;;"}