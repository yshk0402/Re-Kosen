{"version":3,"file":"CTBSessionProvider.mjs","sources":["../../../../admin/src/components/CTBSession/CTBSessionProvider.tsx"],"sourcesContent":["import { useState, useCallback, useMemo, type ReactNode } from 'react';\n\nimport { CTBSessionContext } from './sessionContext';\n\ninterface CTBSessionProviderProps {\n  children: ReactNode;\n}\n\n/**\n * Generates a unique session identifier for CTB tracking\n * Uses crypto.randomUUID() for guaranteed uniqueness and readability\n *\n * @returns Session ID in format: ctb-{uuid}\n */\nexport const generateSessionId = (): string | undefined => {\n  if (crypto.randomUUID) {\n    return `ctb-${crypto.randomUUID()}`;\n  }\n};\n\n/**\n * Provider for CTB session tracking context.\n *\n * This provider should wrap components that need to track CTB events with session IDs.\n * It manages the session ID lifecycle and provides methods to regenerate it when needed.\n *\n * Usage:\n * ```tsx\n * <CTBSessionProvider>\n *       {children}\n * </CTBSessionProvider>\n * ```\n */\nexport const CTBSessionProvider = ({ children }: CTBSessionProviderProps) => {\n  const [sessionId, setSessionId] = useState(() => generateSessionId());\n\n  const regenerateSessionId = useCallback(() => {\n    setSessionId(generateSessionId());\n  }, []);\n\n  const value = useMemo(\n    () => ({\n      sessionId,\n      regenerateSessionId,\n    }),\n    [sessionId, regenerateSessionId]\n  );\n\n  return <CTBSessionContext.Provider value={value}>{children}</CTBSessionContext.Provider>;\n};\n"],"names":["generateSessionId","crypto","randomUUID","CTBSessionProvider","children","sessionId","setSessionId","useState","regenerateSessionId","useCallback","value","useMemo","_jsx","CTBSessionContext","Provider"],"mappings":";;;;AAQA;;;;;UAMaA,iBAAoB,GAAA,IAAA;IAC/B,IAAIC,MAAAA,CAAOC,UAAU,EAAE;AACrB,QAAA,OAAO,CAAC,IAAI,EAAED,MAAAA,CAAOC,UAAU,EAAI,CAAA,CAAA;AACrC;AACF;AAEA;;;;;;;;;;;;AAYC,IACYC,MAAAA,kBAAAA,GAAqB,CAAC,EAAEC,QAAQ,EAA2B,GAAA;AACtE,IAAA,MAAM,CAACC,SAAAA,EAAWC,YAAa,CAAA,GAAGC,SAAS,IAAMP,iBAAAA,EAAAA,CAAAA;AAEjD,IAAA,MAAMQ,sBAAsBC,WAAY,CAAA,IAAA;QACtCH,YAAaN,CAAAA,iBAAAA,EAAAA,CAAAA;AACf,KAAA,EAAG,EAAE,CAAA;IAEL,MAAMU,KAAAA,GAAQC,OACZ,CAAA,KAAO;AACLN,YAAAA,SAAAA;AACAG,YAAAA;AACF,SAAA,CACA,EAAA;AAACH,QAAAA,SAAAA;AAAWG,QAAAA;AAAoB,KAAA,CAAA;IAGlC,qBAAOI,GAAA,CAACC,kBAAkBC,QAAQ,EAAA;QAACJ,KAAOA,EAAAA,KAAAA;AAAQN,QAAAA,QAAAA,EAAAA;;AACpD;;;;"}