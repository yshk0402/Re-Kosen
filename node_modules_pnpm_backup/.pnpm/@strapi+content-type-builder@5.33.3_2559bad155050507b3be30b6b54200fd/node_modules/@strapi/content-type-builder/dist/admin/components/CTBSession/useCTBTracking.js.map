{"version":3,"file":"useCTBTracking.js","sources":["../../../../admin/src/components/CTBSession/useCTBTracking.ts"],"sourcesContent":["import { useCallback } from 'react';\n\nimport { useTracking } from '@strapi/admin/strapi-admin';\n\nimport { useCTBSession } from './useCTBSession';\n\n/**\n * Hook that provides tracking functionality with automatic CTB session ID inclusion.\n * This version accepts arbitrary event names (string) to allow feature-specific\n * events that are not yet declared in the central tracking typings.\n *\n * Note: this intentionally relaxes TypeScript restrictions so callers can\n * emit new tracking event names without needing to update the upstream\n * tracking type definitions. The session ID is merged into the properties\n * object before forwarding to the original tracking implementation.\n */\nexport const useCTBTracking = () => {\n  const { trackUsage: originalTrackUsage } = useTracking();\n  const { sessionId } = useCTBSession();\n\n  const trackUsage = useCallback(\n    (event: string, properties?: Record<string, unknown>) => {\n      const enhancedProperties = {\n        ...(properties ?? {}),\n        ctbSessionId: sessionId,\n      };\n\n      // Forward to original implementation. Casts are necessary because\n      // originalTrackUsage has strict overloads for known event names.\n      return (originalTrackUsage as any)(event, enhancedProperties as any);\n    },\n    [originalTrackUsage, sessionId]\n  );\n\n  return { trackUsage };\n};\n"],"names":["useCTBTracking","trackUsage","originalTrackUsage","useTracking","sessionId","useCTBSession","useCallback","event","properties","enhancedProperties","ctbSessionId"],"mappings":";;;;;;AAMA;;;;;;;;;UAUaA,cAAiB,GAAA,IAAA;AAC5B,IAAA,MAAM,EAAEC,UAAAA,EAAYC,kBAAkB,EAAE,GAAGC,uBAAAA,EAAAA;IAC3C,MAAM,EAAEC,SAAS,EAAE,GAAGC,2BAAAA,EAAAA;IAEtB,MAAMJ,UAAAA,GAAaK,iBACjB,CAAA,CAACC,KAAeC,EAAAA,UAAAA,GAAAA;AACd,QAAA,MAAMC,kBAAqB,GAAA;YACzB,GAAID,UAAAA,IAAc,EAAE;YACpBE,YAAcN,EAAAA;AAChB,SAAA;;;QAIA,OAAQF,mBAA2BK,KAAOE,EAAAA,kBAAAA,CAAAA;KAE5C,EAAA;AAACP,QAAAA,kBAAAA;AAAoBE,QAAAA;AAAU,KAAA,CAAA;IAGjC,OAAO;AAAEH,QAAAA;AAAW,KAAA;AACtB;;;;"}