{"version":3,"file":"useDocumentActions.mjs","sources":["../../../admin/src/hooks/useDocumentActions.ts"],"sourcesContent":["import * as React from 'react';\n\nimport { SerializedError } from '@reduxjs/toolkit';\nimport {\n  useNotification,\n  useTracking,\n  type TrackingEvent,\n  useAPIErrorHandler,\n} from '@strapi/admin/strapi-admin';\nimport { useGetAIFeatureConfigQuery, useAIAvailability } from '@strapi/admin/strapi-admin/ee';\nimport { useIntl, type MessageDescriptor } from 'react-intl';\nimport { useNavigate } from 'react-router-dom';\n\nimport { useRelationModal } from '../pages/EditView/components/FormInputs/Relations/RelationModal';\nimport { usePreviewContext } from '../preview/pages/Preview';\nimport {\n  useAutoCloneDocumentMutation,\n  useCloneDocumentMutation,\n  useCreateDocumentMutation,\n  useDeleteDocumentMutation,\n  useDeleteManyDocumentsMutation,\n  useDiscardDocumentMutation,\n  useLazyGetDocumentQuery,\n  usePublishDocumentMutation,\n  usePublishManyDocumentsMutation,\n  useUnpublishDocumentMutation,\n  useUnpublishManyDocumentsMutation,\n  useUpdateDocumentMutation,\n} from '../services/documents';\nimport { BaseQueryError } from '../utils/api';\nimport { getTranslation } from '../utils/translations';\n\nimport type { Document } from './useDocument';\nimport type {\n  AutoClone,\n  Clone,\n  Create,\n  Delete,\n  BulkDelete,\n  Discard,\n  FindOne,\n  Publish,\n  BulkPublish,\n  Update,\n  Unpublish,\n  BulkUnpublish,\n} from '../../../shared/contracts/collection-types';\n\nconst DEFAULT_UNEXPECTED_ERROR_MSG = {\n  id: 'notification.error',\n  defaultMessage: 'An error occurred, please try again',\n} satisfies MessageDescriptor;\n\ntype OperationResponse<TResponse extends { data: any; meta?: any; error?: any }> =\n  | Pick<TResponse, 'data'>\n  | Pick<TResponse, 'data' | 'meta'>\n  | { error: BaseQueryError | SerializedError };\n\ntype BulkOperationResponse<TResponse extends { data: any; error?: any }> =\n  | Pick<TResponse, 'data'>\n  | { error: BaseQueryError | SerializedError };\n\ntype UseDocumentActions = (\n  fromPreview?: boolean,\n  fromRelationModal?: boolean\n) => {\n  /**\n   * @description Attempts to clone a document based on the provided sourceId.\n   * This will return a list of the fields as an error if it's unable to clone.\n   * You most likely want to use the `clone` action instead.\n   */\n  isLoading: boolean;\n  autoClone: (args: {\n    model: string;\n    sourceId: string;\n    locale?: string;\n  }) => Promise<OperationResponse<AutoClone.Response>>;\n  clone: (\n    args: {\n      model: string;\n      documentId: string;\n      params?: object;\n    },\n    document: Omit<Document, 'id'>,\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willCreateEntry' | 'didCreateEntry' | 'didNotCreateEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Clone.Response>>;\n  create: (\n    args: {\n      model: string;\n      params?: object;\n    },\n    document: Omit<Document, 'id'>,\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willCreateEntry' | 'didCreateEntry' | 'didNotCreateEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Create.Response>>;\n  delete: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willDeleteEntry' | 'didDeleteEntry' | 'didNotDeleteEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Delete.Response>>;\n  deleteMany: (args: {\n    model: string;\n    documentIds: string[];\n    params?: object;\n  }) => Promise<BulkOperationResponse<BulkDelete.Response>>;\n  discard: (args: {\n    collectionType: string;\n    model: string;\n    documentId?: string;\n    params?: object;\n  }) => Promise<OperationResponse<Discard.Response>>;\n  getDocument: (args: {\n    collectionType: string;\n    model: string;\n    documentId?: string;\n    params?: object;\n  }) => Promise<FindOne.Response | undefined>;\n  publish: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    document: Partial<Document>\n  ) => Promise<OperationResponse<Publish.Response>>;\n  publishMany: (args: {\n    model: string;\n    documentIds: string[];\n    params?: object;\n  }) => Promise<BulkOperationResponse<BulkPublish.Response>>;\n  update: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    document: Partial<Document>,\n    trackerProperty?: Extract<\n      TrackingEvent,\n      { name: 'willEditEntry' | 'didEditEntry' | 'didNotEditEntry' }\n    >['properties']\n  ) => Promise<OperationResponse<Update.Response>>;\n  unpublish: (\n    args: {\n      collectionType: string;\n      model: string;\n      documentId?: string;\n      params?: object;\n    },\n    discardDraft?: boolean\n  ) => Promise<OperationResponse<Unpublish.Response>>;\n  unpublishMany: (args: {\n    model: string;\n    documentIds: string[];\n    params?: object;\n  }) => Promise<BulkOperationResponse<BulkUnpublish.Response>>;\n};\n\ntype IUseDocumentActs = ReturnType<UseDocumentActions>;\n\n/**\n * @alpha\n * @public\n * @description Contains all the operations that can be performed on a single document.\n * Designed to be able to be used anywhere within a Strapi app. The hooks will handle\n * notifications should the operation fail, however the response is always returned incase\n * the user needs to handle side-effects.\n * @example\n * ```tsx\n * import { Form } from '@strapi/admin/admin';\n *\n * const { id, model, collectionType } = useParams<{ id: string; model: string; collectionType: string }>();\n * const { update } = useDocumentActions();\n *\n * const handleSubmit = async (data) => {\n *  await update({ collectionType, model, documentId: id }, data);\n * }\n *\n * return <Form method=\"PUT\" onSubmit={handleSubmit} />\n * ```\n *\n */\nconst useDocumentActions: UseDocumentActions = () => {\n  const { toggleNotification } = useNotification();\n  const { formatMessage } = useIntl();\n  const { trackUsage } = useTracking();\n  const { _unstableFormatAPIError: formatAPIError } = useAPIErrorHandler();\n  const navigate = useNavigate();\n  const { data: aiFeatureConfig } = useGetAIFeatureConfigQuery();\n  const isAiAvailable = useAIAvailability();\n\n  // Get metadata from context providers for tracking purposes\n  const previewContext = usePreviewContext('useDocumentActions', () => true, false);\n  const relationContext = useRelationModal('useDocumentActions', () => true, false);\n  const fromPreview = previewContext != undefined;\n  const fromRelationModal = relationContext != undefined;\n\n  const [deleteDocument, { isLoading: isDeleting }] = useDeleteDocumentMutation();\n  const _delete: IUseDocumentActs['delete'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, trackerProperty) => {\n      try {\n        trackUsage('willDeleteEntry', trackerProperty);\n\n        const res = await deleteDocument({\n          collectionType,\n          model,\n          documentId,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({\n            type: 'danger',\n            message: formatAPIError(res.error),\n          });\n\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.delete'),\n            defaultMessage: 'Deleted document',\n          }),\n        });\n\n        trackUsage('didDeleteEntry', trackerProperty);\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotDeleteEntry', { error: err, ...trackerProperty });\n\n        throw err;\n      }\n    },\n    [trackUsage, deleteDocument, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [deleteManyDocuments, { isLoading: isDeletingMany }] = useDeleteManyDocumentsMutation();\n\n  const deleteMany: IUseDocumentActs['deleteMany'] = React.useCallback(\n    async ({ model, documentIds, params }) => {\n      try {\n        trackUsage('willBulkDeleteEntries');\n\n        const res = await deleteManyDocuments({\n          model,\n          documentIds,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({\n            type: 'danger',\n            message: formatAPIError(res.error),\n          });\n\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          title: formatMessage({\n            id: getTranslation('success.records.delete'),\n            defaultMessage: 'Successfully deleted.',\n          }),\n          message: '',\n        });\n\n        trackUsage('didBulkDeleteEntries');\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotBulkDeleteEntries');\n\n        throw err;\n      }\n    },\n    [trackUsage, deleteManyDocuments, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [discardDocument, { isLoading: isDiscardingDocument }] = useDiscardDocumentMutation();\n  const discard: IUseDocumentActs['discard'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }) => {\n      try {\n        const res = await discardDocument({\n          collectionType,\n          model,\n          documentId,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({\n            type: 'danger',\n            message: formatAPIError(res.error),\n          });\n\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: 'content-manager.success.record.discard',\n            defaultMessage: 'Changes discarded',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [discardDocument, formatAPIError, formatMessage, toggleNotification]\n  );\n\n  const [publishDocument, { isLoading: isPublishing }] = usePublishDocumentMutation();\n\n  const publish: IUseDocumentActs['publish'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, data) => {\n      try {\n        trackUsage('willPublishEntry', { documentId });\n\n        const res = await publishDocument({\n          collectionType,\n          model,\n          documentId,\n          data,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n          return { error: res.error };\n        }\n\n        trackUsage('didPublishEntry', {\n          documentId,\n          fromPreview,\n          fromRelationModal,\n          ...(isAiAvailable\n            ? { isAIi18nConfigured: Boolean(aiFeatureConfig?.isAIi18nConfigured) }\n            : {}),\n        });\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.publish'),\n            defaultMessage: 'Published document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [\n      trackUsage,\n      publishDocument,\n      fromPreview,\n      fromRelationModal,\n      toggleNotification,\n      formatMessage,\n      formatAPIError,\n    ]\n  );\n\n  const [publishManyDocuments, { isLoading: isPublishingMany }] = usePublishManyDocumentsMutation();\n  const publishMany: IUseDocumentActs['publishMany'] = React.useCallback(\n    async ({ model, documentIds, params }) => {\n      try {\n        // TODO Confirm tracking events for bulk publish?\n\n        const res = await publishManyDocuments({\n          model,\n          documentIds,\n          params,\n        });\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.publish'),\n            defaultMessage: 'Published document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n        throw err;\n      }\n    },\n    [\n      // trackUsage,\n      publishManyDocuments,\n      toggleNotification,\n      formatMessage,\n      formatAPIError,\n    ]\n  );\n\n  const [updateDocument, { isLoading: isUpdating }] = useUpdateDocumentMutation();\n  const update: IUseDocumentActs['update'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, data, trackerProperty) => {\n      try {\n        trackUsage('willEditEntry', trackerProperty);\n\n        const res = await updateDocument({\n          collectionType,\n          model,\n          documentId,\n          data,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          trackUsage('didNotEditEntry', { error: res.error, ...trackerProperty });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didEditEntry', {\n          ...trackerProperty,\n          documentId: res.data.data.documentId,\n          fromPreview,\n          fromRelationModal,\n          ...(isAiAvailable\n            ? { isAIi18nConfigured: Boolean(aiFeatureConfig?.isAIi18nConfigured) }\n            : {}),\n        });\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.save'),\n            defaultMessage: 'Saved document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        trackUsage('didNotEditEntry', { error: err, ...trackerProperty });\n\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [\n      trackUsage,\n      updateDocument,\n      fromPreview,\n      fromRelationModal,\n      toggleNotification,\n      formatMessage,\n      formatAPIError,\n    ]\n  );\n\n  const [unpublishDocument] = useUnpublishDocumentMutation();\n  const unpublish: IUseDocumentActs['unpublish'] = React.useCallback(\n    async ({ collectionType, model, documentId, params }, discardDraft = false) => {\n      try {\n        trackUsage('willUnpublishEntry');\n\n        const res = await unpublishDocument({\n          collectionType,\n          model,\n          documentId,\n          params,\n          data: {\n            discardDraft,\n          },\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didUnpublishEntry');\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.unpublish'),\n            defaultMessage: 'Unpublished document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [trackUsage, unpublishDocument, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [unpublishManyDocuments, { isLoading: isUnpublishingMany }] =\n    useUnpublishManyDocumentsMutation();\n  const unpublishMany: IUseDocumentActs['unpublishMany'] = React.useCallback(\n    async ({ model, documentIds, params }) => {\n      try {\n        trackUsage('willBulkUnpublishEntries');\n\n        const res = await unpublishManyDocuments({\n          model,\n          documentIds,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didBulkUnpublishEntries');\n\n        toggleNotification({\n          type: 'success',\n          title: formatMessage({\n            id: getTranslation('success.records.unpublish'),\n            defaultMessage: 'Successfully unpublished.',\n          }),\n          message: '',\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotBulkUnpublishEntries');\n\n        throw err;\n      }\n    },\n    [trackUsage, unpublishManyDocuments, toggleNotification, formatMessage, formatAPIError]\n  );\n\n  const [createDocument] = useCreateDocumentMutation();\n  const create: IUseDocumentActs['create'] = React.useCallback(\n    async ({ model, params }, data, trackerProperty) => {\n      try {\n        const res = await createDocument({\n          model,\n          data,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          trackUsage('didNotCreateEntry', { error: res.error, ...trackerProperty });\n\n          return { error: res.error };\n        }\n        trackUsage('didCreateEntry', {\n          ...trackerProperty,\n          documentId: res.data.data.documentId,\n          fromPreview,\n          fromRelationModal,\n          ...(isAiAvailable\n            ? { isAIi18nConfigured: Boolean(aiFeatureConfig?.isAIi18nConfigured) }\n            : {}),\n        });\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.save'),\n            defaultMessage: 'Saved document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotCreateEntry', { error: err, ...trackerProperty });\n\n        throw err;\n      }\n    },\n    [\n      createDocument,\n      formatAPIError,\n      formatMessage,\n      fromPreview,\n      fromRelationModal,\n      toggleNotification,\n      trackUsage,\n      isAiAvailable,\n      aiFeatureConfig,\n    ]\n  );\n\n  const [autoCloneDocument] = useAutoCloneDocumentMutation();\n  const autoClone: IUseDocumentActs['autoClone'] = React.useCallback(\n    async ({ model, sourceId, locale }) => {\n      try {\n        const res = await autoCloneDocument({\n          model,\n          sourceId,\n          params: locale ? { locale } : undefined,\n        });\n\n        if ('error' in res) {\n          return { error: res.error };\n        }\n\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.clone'),\n            defaultMessage: 'Cloned document',\n          }),\n        });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        throw err;\n      }\n    },\n    [autoCloneDocument, formatMessage, toggleNotification]\n  );\n\n  const [cloneDocument] = useCloneDocumentMutation();\n  const clone: IUseDocumentActs['clone'] = React.useCallback(\n    async ({ model, documentId, params }, body, trackerProperty) => {\n      try {\n        // Omit id and documentId so they are not copied to the clone\n        const { id: _id, documentId: _documentId, ...restBody } = body;\n\n        /**\n         * If we're cloning we want to post directly to this endpoint\n         * so that the relations even if they're not listed in the EditView\n         * are correctly attached to the entry.\n         */\n        const res = await cloneDocument({\n          model,\n          sourceId: documentId,\n          data: restBody,\n          params,\n        });\n\n        if ('error' in res) {\n          toggleNotification({ type: 'danger', message: formatAPIError(res.error) });\n\n          trackUsage('didNotCreateEntry', { error: res.error, ...trackerProperty });\n\n          return { error: res.error };\n        }\n\n        trackUsage('didCreateEntry', {\n          ...trackerProperty,\n          ...(isAiAvailable\n            ? { isAIi18nConfigured: Boolean(aiFeatureConfig?.isAIi18nConfigured) }\n            : {}),\n        });\n        toggleNotification({\n          type: 'success',\n          message: formatMessage({\n            id: getTranslation('success.record.clone'),\n            defaultMessage: 'Cloned document',\n          }),\n        });\n\n        // Redirect to normal edit view\n        navigate(`../../${res.data.data.documentId}`, { relative: 'path' });\n\n        return res.data;\n      } catch (err) {\n        toggleNotification({\n          type: 'danger',\n          message: formatMessage(DEFAULT_UNEXPECTED_ERROR_MSG),\n        });\n\n        trackUsage('didNotCreateEntry', { error: err, ...trackerProperty });\n\n        throw err;\n      }\n    },\n    [cloneDocument, trackUsage, toggleNotification, formatMessage, formatAPIError, navigate]\n  );\n\n  const [getDoc] = useLazyGetDocumentQuery();\n  const getDocument: IUseDocumentActs['getDocument'] = React.useCallback(\n    async (args) => {\n      const { data } = await getDoc(args);\n\n      return data;\n    },\n    [getDoc]\n  );\n\n  return {\n    isLoading:\n      isPublishing ||\n      isUpdating ||\n      isDiscardingDocument ||\n      isDeleting ||\n      isDeletingMany ||\n      isUnpublishingMany ||\n      isPublishingMany,\n    autoClone,\n    clone,\n    create,\n    delete: _delete,\n    deleteMany,\n    discard,\n    getDocument,\n    publish,\n    publishMany,\n    unpublish,\n    unpublishMany,\n    update,\n  } satisfies IUseDocumentActs;\n};\n\nexport { useDocumentActions };\nexport type { UseDocumentActions, OperationResponse };\n"],"names":["DEFAULT_UNEXPECTED_ERROR_MSG","id","defaultMessage","useDocumentActions","toggleNotification","useNotification","formatMessage","useIntl","trackUsage","useTracking","_unstableFormatAPIError","formatAPIError","useAPIErrorHandler","navigate","useNavigate","data","aiFeatureConfig","useGetAIFeatureConfigQuery","isAiAvailable","useAIAvailability","previewContext","usePreviewContext","relationContext","useRelationModal","fromPreview","undefined","fromRelationModal","deleteDocument","isLoading","isDeleting","useDeleteDocumentMutation","_delete","React","useCallback","collectionType","model","documentId","params","trackerProperty","res","type","message","error","getTranslation","err","deleteManyDocuments","isDeletingMany","useDeleteManyDocumentsMutation","deleteMany","documentIds","title","discardDocument","isDiscardingDocument","useDiscardDocumentMutation","discard","publishDocument","isPublishing","usePublishDocumentMutation","publish","isAIi18nConfigured","Boolean","publishManyDocuments","isPublishingMany","usePublishManyDocumentsMutation","publishMany","updateDocument","isUpdating","useUpdateDocumentMutation","update","unpublishDocument","useUnpublishDocumentMutation","unpublish","discardDraft","unpublishManyDocuments","isUnpublishingMany","useUnpublishManyDocumentsMutation","unpublishMany","createDocument","useCreateDocumentMutation","create","autoCloneDocument","useAutoCloneDocumentMutation","autoClone","sourceId","locale","cloneDocument","useCloneDocumentMutation","clone","body","_id","_documentId","restBody","relative","getDoc","useLazyGetDocumentQuery","getDocument","args","delete"],"mappings":"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"}